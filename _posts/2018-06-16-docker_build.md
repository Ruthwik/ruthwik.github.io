---
layout: post
title: Building a Docker image
subtitle: First Docker image.
published: true
categories: other
tags: [docker, containerization]

bigimg:
  - /img/dockerbuild/containers.jpg

---

<p>
Wikipedia defines Docker as
</p>

> an open-source project that automates the deployment of software applications inside containers by providing an additional layer of abstraction and automation of OS-level virtualization on Linux.


<h3>What is a Dockerfile</h3>
<p>
Dockerfile is a script, composed of various commands (instructions) and arguments listed successively to automatically perform actions on a base image
in order to create (or form) a new one.
They are used for organizing things and greatly help with deployments by simplifying the process start-to-finish.

The following are the steps to create your first docker image.
<ol>
	<li> Create a Dockerfile </li>
	<li> Build the dockerfile to create image </li>
	<li> Run the image to create container. </li>

</ol>

</p>

<h3>Dockerfile Commands</h3>
<p>
There are a dozen commands but we will touch a few of them that are useful in building a docker image.
</p>

<h4>FROM</h4>
<p>
This is the most important among all the commands. This defines the base image which is used to build the process. If
FROM is not found locally on the host, Docker will try to download from the Docker hub.
</p>

```
	# Usage: FROM [image name]
	FROM ubuntu
```

<h4>MAINTAINER</h4>
<p>
This declares the author/creator of the dockerfile. This just helps for future references.
</p>

```
	# Usage: MAINTAINER [name]
	MAINTAINER authors_name
```

<h4>RUN</h4>
<p>
The RUN command is the central executing directive for Dockerfiles. It takes a command as its argument and runs it to form the image.
Unlike CMD, it actually is used to build the image (forming another layer on top of the previous one which is committed).
</p>

```
	# Usage: RUN [command]
	RUN aptitude install -y riak
```

<h4>CMD</h4>
<p>
The CMD is similar to RUN and can be used to execute commands. CMD is executed after the container has started.
</p>

```
	# Usage 1: CMD application "argument", "argument", ..
	CMD "echo" "Hello World!"
```

<h4>VOLUME</h4>
<p>
The VOLUME command is used for persisting data generated by Docker containers. Using this command the storage is shared among containers and also between
host and the containers
</p>

```
	# Usage: VOLUME ["/dir_1", "/dir_2" ..]
	VOLUME ["/my_files"]
```

<h3>1. Create a Dockerfile</h3>
<p>
Using a texteditor create a Dockerfile (remember without any extension)
</p>

<h4>Set the base image</h4>
<p>
A base image is used to create the container image. A base image can be an offical Docker image. Here in our Dockerfile we will be using
ubuntu as our base image
</p>
```
	# Set the base image to Ubuntu
	FROM ubuntu

```

<h4>MAINTAINER/AUTHOR</h4>
<p>
</p>
```
	# File Author / Maintainer
	MAINTAINER ruthwik

```

<h4>Setting up the commands </h4>
<p>
</p>
```
	# Update the repository sources list
	RUN apt-get update

	# Command to print
	CMD "echo" "Hello World...  from my first docker image"

```
<img src="/img/dockerbuild/dockerfile.png" alt="dockerfile"/>


<h3>2. Build the dockerfile to create image</h3>


<p>
Use the following to create your first image
</p>

```
	docker build -t ImageName:Tag directoryOfDocekrfile

```

<img src="/img/dockerbuild/dockerbuild.png" alt="dockerbuild"/>


<h3>3. Run the image to create container</h3>
<p>
</p>
<img src="/img/dockerbuild/dockerrun.png" alt="dockerrun"/>


<h3>Portainer</h3>
<p>
Portainer is a lightweight management UI which allows you to easily manage your different Docker environments (Docker hosts or Swarm clusters).
</p>

<h4>Pull and Run the image</h4>

```
  docker pull portainer/portainer

  docker volume create portainer_data

	docker run -d -p 8000:8000 -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer

```
<h4>Login to Adminpage</h4>

<img src="/img/dockerbuild/portainer_login.png" alt="dockerrun"/>

<h4>Portainer Home page</h4>
<img src="/img/dockerbuild/portainer_home.png" alt="dockerrun"/>

<h4>Portainer Dashboard</h4>
<img src="/img/dockerbuild/portainer_home.png" alt="dockerrun"/>

<h4>Check the list of images</h4>
<img src="/img/dockerbuild/portainer_imagelist.png" alt="dockerrun"/>

<h4>Check the list of containers</h4>
<img src="/img/dockerbuild/portainer_containerlist.png" alt="dockerrun"/>

<h4>Container logs</h4>
<img src="/img/dockerbuild/portainer_container_logs.png" alt="portainer_container_logs"/>

<h4>Container statistics</h4>
<img src="/img/dockerbuild/portainer_container_stats.png" alt="portainer_container_stats"/>

<p>If you have any question or feedback, please do reach out to me by commenting below.</p>
